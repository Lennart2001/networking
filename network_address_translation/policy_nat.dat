================================ Policy Network Address Translation ================================



Policy NAT is pretty straightforward
  - The name "Policy" comes from the fact that you can assign rules to the NAT
  - Policy NAT is able to translate based on a matching SOURCE IP Address and DESTINATION IP Address
     - If Source is 10.6.6.0/24 and destination is 45.5.4.9  (If A & B, then do C)
       - Dynamic PAT source to 32.8.2.77

RULES:
- If Source is 10.6.6.0/24 and destination is 45.5.4.9  (If A & B, then do C)
  - Dynamic PAT source to 32.8.2.77
- If Source is 10.6.6.0/24
  - Dynamic PAT source to 32.8.2.66


┌----------------------------------------------------------------------┐
|                                          Inside Network: 10.6.6.0/24 |                  ┌----------------------┐
| ┌-------------------┐         **CHANGED**                            |                  | SRC:  28.2.4.6 :80   |
| | Host B: 10.6.6.62 |<--<--┌------------------------┐                |     /<--<--<--<--| DEST: 32.8.2.66:9999 |
| └-------------------┘      | SRC:  28.2.4.6 :80     |<--<--<--<--<┌------------┐        └----------------------┘
|          |                 | DEST: 10.6.6.62: 3333  |             |  Router 1  |           **ORIGINAL**
|          |                 └------------------------┘ ┌-----------/ Policy NAT \-----------┐
| ┌------------------------┐                            |                                    |
| | SRC:  10.6.6.62: 3333  |-->-->-->-->-->-->-->-->-->-| 10.6.6.62:3333 <-> 32.8.2.66:9999  |
| | DEST: 28.2.4.6 :80     |                            └------------------------------------┘
| └------------------------┘                                           |     \                ┌----------------------┐
|    **FLIPPED**                                                       |      \-->-->-->-->-->| SRC:  32.8.2.66:9999 |
└----------------------------------------------------------------------┘                      | DEST: 28.2.4.6 :80   |
*Notice how even though the first parameter of both rules is correct,                         └----------------------┘
 we only use the second one, because our destination does not match the IP                      **CHANGED**
 Address of 45.5.4.9

┌----------------------------------------------------------------------┐
|                                          Inside Network: 10.6.6.0/24 |                  ┌----------------------┐
| ┌-------------------┐         **CHANGED**                            |                  | SRC:  45.5.4.9 :80   |
| | Host A: 10.6.6.61 |<--<--┌------------------------┐                |     /<--<--<--<--| DEST: 32.8.2.77:5555 |
| └-------------------┘      | SRC:  45.5.4.9 :80     |<--<--<--<--<┌------------┐        └----------------------┘
|          |                 | DEST: 10.6.6.61: 2222  |             |  Router 1  |           **ORIGINAL**
|          |                 └------------------------┘ ┌-----------/ Policy NAT \-----------┐
| ┌------------------------┐                            | 10.6.6.61:2222 <-> 32.8.2.77:5555  |
| | SRC:  10.6.6.61: 2222  |-->-->-->-->-->-->-->-->-->-| 10.6.6.62:3333 <-> 32.8.2.66:9999  |
| | DEST: 45.5.4.9 :80     |                            └------------------------------------┘
| └------------------------┘                                           |     \                ┌----------------------┐
|    **FLIPPED**                                                       |      \-->-->-->-->-->| SRC:  32.8.2.77:5555 |
└----------------------------------------------------------------------┘                      | DEST: 45.5.4.9 :80   |
*Notice how we now match both the Source IP Address and the Destination IP Address.           └----------------------┘
                                                                                                **CHANGED**

